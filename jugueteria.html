<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TU-CAN</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/style/styleIndex.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="./assets/image/logo-perro.png" type="image/x-icon">
    <link rel="stylesheet" href="./assets/style/styleJugueteria.css">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg bg-body-tertiary d-flex justify-content-between" style="flex-wrap: wrap;"
            id="cajaDeInicio">
            <div style="width: 33.3%; display: flex; justify-content: center;">
                <img src="./assets/image/logo-perro.png" alt="" width="80">
            </div>
            <div style="width: 33.3%; display: flex; justify-content: center;">
                <a class="navbar-brand" href="#"><img src="./assets/image/logo-nombre.png" alt=""
                        style="height: 3rem;"></a>
            </div>
            <div class="container-fluid d-flex flex-row"
                style="width: 33.3%; margin: 0; display: flex; justify-content: center;">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <div class="navbar-nav">
                        <a class="nav-link " aria-current="page" href="#">Inicio</a>
                        <a class="nav-link" href="#">Contacto</a>
                        <a class="nav-link" href="#">Farmacia</a>
                        <a class="nav-link active" href="#">Juguetes</a>
                        <button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight" style="border: none; background-color: transparent;"><img src="./assets/image/logo-carrito.png" alt="" style="height: 2rem;"></button>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <div id="app">
            {{handleFav}}
            <div class="p-3 d-flex flex-wrap justify-content-center">
                <input type="text" class="form-control" name="nombreEvento" v-model="valorBusqueda" placeholder="Ex: Batman" style="width: 30vh; margin-right: 1vh;">
                <button class="btn btn-outline-success" type="submit">üîç</button>
                {{filtro}}
            </div>
            <div style="display: flex; " class="p-4">
                <div class="caja-de-tarjetas d-flex justify-content-around align-items-center flex-wrap" style=" width: 95%; gap: 1rem;" id="caja-main">
                    <div v-for="tarjeta of productosFiltrados" class="card" style="width: 19rem; height: 26rem; align-items: center; justify-content: space-between;" >
                        <div style="display: flex; align-items: center; justify-content: center;">
                            <img :src="tarjeta.imagen" class="card-img-top" :alt="tarjeta.producto">
                        </div>
                        <div class="d-flex align-items-center gap-2 flex-column mb-2">
                            <h5 class="card-title">{{tarjeta.producto}}</h5>
                            <div class="d-flex gap-3 align-items-center">
                                <div v-if="tarjeta.disponibles >= 5" style="display: flex; gap: 2rem; align-items: center;">
                                    <p style="margin: 0;">Stock: {{tarjeta.disponibles}}</p>
                                    <div class="form-check form-switch d-flex align-items-center">
                                        <input class="form-check-input" type="checkbox" v-model="favoritos" :value="tarjeta.producto" :id="'card-'+tarjeta.producto">
                                        <label class="form-check-label" :for="'card-'+tarjeta.producto"><img src="./assets/image/agregarAlCarrito.ico" alt="" style="width: 2.2rem;" ></label>
                                    </div>
                                </div>
                                <div v-else-if="tarjeta.disponibles == 0">
                                    <p style="color: red; margin: 0;"> No quedan disponibles</p>
                                </div>
                                <div v-else-if="5 > tarjeta.disponibles" style="display: flex; gap: 1rem; align-items: center;">
                                    <p style="margin: 0;">Stock: {{tarjeta.disponibles}}</p>
                                    <p  style = "border: 1px solid red; border-radius: 10px; padding: 0.2rem; margin: 0;"> Ultimas unidades</p>
                                    <div class="form-check form-switch d-flex align-items-center">
                                        <input class="form-check-input" type="checkbox" v-model="favoritos" :value="tarjeta.producto" :id="'card-'+tarjeta.producto">
                                        <label class="form-check-label" :for="'card-'+tarjeta.producto"><img src="./assets/image/agregarAlCarrito.ico" alt="" style="width: 2.2rem;" ></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inicio MODAL -->
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasRightLabel" style="font-weight: 800;">CARRITO DE COMPRAS</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body" style="padding: 0;">
                    <div class="d-flex justify-content-between align-items-center" style="border-top: 1px solid black; border-bottom: 1px solid black; width: 100%; height: 2.5rem; padding: 0;">
                        <p style="font-weight: 100; margin: 0; margin-left: 1rem;">PRODUCTO</p>
                        <p style="font-weight: 100; margin: 0; margin-right: 1rem;">SUBTOTAL</p>
                    </div>
                    <div>
                        <template v-if="favoritos.length > 0">
                            <div style=" height: 75vh; display: flex; flex-direction: column; justify-content: space-between;">
                                <div>
                                    <div  v-for="tarjeta of productosFiltrados">    
                                        <div v-if="favoritos.includes( tarjeta.producto )">
                                            <div style="border: 1px solid rgba(91, 90, 90, 0.334); height: 4rem; width: 100%; margin-top: 1rem; display: flex;">
                                                <div style="width: 70%; height: 100%;  display: flex; align-items: center;">
                                                    <div style="height: 100%;  width: 40%; align-items: center; display: flex; justify-content: center;">
                                                        <img :src="tarjeta.imagen" alt="" style="height: 80%;">
                                                    </div>
                                                    <div style="height: 100%;  width: 60%; display: flex; align-items: center; justify-content: center;">
                                                        <p style="margin: 0;">{{tarjeta.producto}}</p>
                                                    </div>
                                                </div>
                                                <div style="width: 30%; height: 100%;  display: flex; align-items: center; justify-content: center;">
                                                    <p style="margin: 0;">$ {{tarjeta.precio}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer" >
                                    <button type="button" class="btn btn-ligth" data-bs-dismiss="modal" v-on:click="borrarFavoritos"  style="color: red; ">Vaciar carrito</button>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center" style="border-top: 1px solid black;  width: 100%; height: 10vh; padding: 0;">
                                <p style="font-weight: 100; margin: 0; margin-left: 1rem;">TOTAL:</p>
                                <p style="margin: 0; margin-right: 1rem;">$ {{sumarPrecios}}</p>
                            </div>
                        </template>
                        <template v-else>
                            <p style="width: 100%; margin: 0; text-align: center; color: rgba(236, 89, 89, 0.626);">No tienes productos en tu carro</p>
                        </template>
                    </div>
                </div>
            </div>
            <!-- Fin Modal -->
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="./assets/scripts/message.js"></script>
    <script src="./assets/scripts/jugueteria.js"></script>
</body>

</html>